<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendário de Treinamentos - BREE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #f0f4f8;
            color: #1a202c;
        }

        .calendar-day {
            transition: all 0.3s ease;
            background-color: #ffffff;
            border: 1px solid #e2e8f0;
        }

        .calendar-day:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        .training-card {
            transition: all 0.2s ease;
            background-color: rgba(240, 249, 255, 0.7);
            border: 1px solid #e2e8f0;
        }

        .training-card:hover {
            background-color: rgba(235, 245, 250, 1);
        }

        .participant-list {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }

        .expanded .participant-list {
            max-height: 1000px;
            /* Aumentado para garantir que listas grandes caibam */
            transition: max-height 0.5s ease-in;
        }

        .toggle-icon {
            transition: transform 0.3s ease;
        }

        .expanded .toggle-icon {
            transform: rotate(180deg);
        }

        .department-badge {
            font-size: 0.65rem;
        }

        .month-tab {
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: #e2e8f0;
            color: #4a5568;
        }

        .month-tab.active {
            background-color: #2c5282;
            color: #ffffff;
        }

        .header-gradient {
            background: linear-gradient(90deg, #2c5282 0%, #1a365d 100%);
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        /* Estilos para os botões de filtro de curso */
        .course-filter-tag {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .course-filter-tag.active {
            background-color: #2c5282 !important;
            color: #ffffff !important;
        }

        /* Estilos para os botões de filtro de departamento */
        .department-filter-btn {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .department-filter-btn.active {
            background-color: #2c5282 !important;
            color: #ffffff !important;
        }

    </style>
</head>
 
<body>
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <header class="mb-8 text-center">
            <div class="header-gradient py-4 rounded-lg mb-6 shadow-lg">
                <div class="logo-container">
                    <img src="image-removebg-preview (10).png" alt="Logo 1" class="h-16">
                        <path d="M20 15 H50 A15 15 0 0 1 65 30 A15 15 0 0 1 50 45 H20 Z" fill="#2c5282" />
                        <path d="M20 50 H55 A15 15 0 0 1 70 65 A15 15 0 0 1 55 80 H20 Z" fill="#2c5282" />
                        <path d="M20 10 V85" stroke="#2c5282" stroke-width="10" />
                        
                    </svg>
                     <img src="simbolo-da-seguranca-do-trabalho-removebg-preview (1).png" alt="Logo 2" class="h-16">
                        <circle cx="50" cy="50" r="45" fill="#2c5282" />
                        <path d="M50 15 L85 30 L85 60 C85 75 70 85 50 90 C30 85 15 75 15 60 L15 30 Z" fill="#1a365d"
                            stroke="#ffffff" stroke-width="2" />
                     
                        <path d="M40 65 L60 35" stroke="#ffffff" stroke-width="3" />
                        <circle cx="40" cy="35" r="5" fill="#ffffff" />
                        <circle cx="60" cy="65" r="5" fill="#ffffff" />
                    </svg>
                </div>
                <h1 class="text-4xl font-bold text-white mb-2">Calendário de Treinamentos</h1>
                <p class="text-lg text-blue-200">Segurança e Capacitação Profissional</p>
            </div>

            <div class="flex justify-center mb-4">
                <div class="bg-gray-100 rounded-lg p-1 inline-flex" id="month-tabs-container">
                    </div>
            </div>

            <div class="flex items-center justify-center gap-2 mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                <h2 class="text-3xl font-semibold text-blue-600" id="current-month-display"></h2>
            </div>

            <div class="flex flex-wrap justify-center gap-3 mb-6" id="course-filters-container">
                </div>

            <div class="flex justify-center mb-6">
                <div class="relative">
                    <input type="text" id="search" placeholder="Buscar participante..."
                        class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-64 bg-white text-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 absolute left-3 top-2.5"
                        fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>
            </div>

            <div class="flex flex-wrap justify-center gap-2 mb-6" id="department-filters-container">
                <button class="department-filter-btn px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded-md text-sm font-medium transition-colors active" data-filter="all">Todos</button>
            </div>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="calendar-grid">
            </div>
    </div>

    <script>
        // ESTE É O LOCAL ONDE ESTÃO SEUS DADOS REAIS DE TREINAMENTO!
        const allTrainings = [
            // NR12 Máquinas
            {
                id: '2025-07-07-nr12-t1',
                date: '2025-07-07',
                dayOfWeek: 'Segunda-feira',
                course: 'NR12 - Máquinas',
                courseType: 'NR12',
                time: '08h-12h',
                location: 'Sala de treinamento',
                participants: [
                    { name: 'KAUE OLIVEIRA BRAGA', department: 'MONTAGEM MT' },
                    { name: 'GEANE MASSONY PADILHA', department: 'BOBINAGEM' },
                    { name: 'ALEXSANDER DOS SANTOS GONÇALVES', department: 'MONTAGEM MT' },
                    { name: 'VALDINEI DE OLIVEIRA', department: 'MONTAGEM MT' },
                    { name: 'HENRIQUE GOMES DE LIMA', department: 'MONTAGEM RT' },
                    { name: 'MATEUS BERNARDES MOREIRA', department: 'MONTAGEM MT' },
                    { name: 'ELISIANE BRUDECK', department: 'BOBINAGEM' },
                    { name: 'EMILY SANTOS ANDRADE', department: 'BOBINAGEM' },
                    { name: 'NELSON VEIGA SANTANA', department: 'PINTURA' },
                    { name: 'TIAGO AMARAL DE AZEVEDO', department: 'AUTOCLAVE' },
                ]
            },
            {
                id: '2025-07-07-nr12-t2',
                date: '2025-07-07',
                dayOfWeek: 'Segunda-feira',
                course: 'NR12 - Máquinas',
                courseType: 'NR12',
                time: '19h-23h',
                location: 'Sala de treinamento',
                participants: [
                    { name: 'ANDERSON LUIZ DE LIMA', department: 'AUTOCLAVE' },
                    { name: 'ALEXSANDRA PEREIRA DOS SANTOS', department: 'BOBINAGEM' },
                    { name: 'EMANUELLE APARECIDA RODRIGUES', department: 'BOBINAGEM' },
                    { name: 'GEISSI EMANOELE CORREA DA SILVA', department: 'BOBINAGEM' },
                ]
            },
            {
                id: '2025-07-08-nr12-t3',
                date: '2025-07-08',
                dayOfWeek: 'Terça-feira',
                course: 'NR12 - Máquinas',
                courseType: 'NR12',
                time: '08h-12h',
                location: 'Sala de treinamento',
                participants: [
                    { name: 'LUIZ GUSTAVO DA SILVA', department: 'LABORATORIO' },
                    { name: 'JOCIELEN DA SILVA MEDEIROS SANTOS', department: 'MONTAGEM MT' },
                    { name: 'GIAN CARLO L. BIANCO', department: 'MONTAGEM MT' },
                    { name: 'DANIELA PRODOCIMO DE OLIVEIRA', department: 'MONTAGEM MT' },
                    { name: 'JOSE ARMANDO SANTANA SANTOS', department: 'MONTAGEM MT' },
                    { name: 'RENAN DA SILVA TELES', department: 'MONTAGEM RT' },
                ]
            },
            {
                id: '2025-07-08-nr12-t4',
                date: '2025-07-08',
                dayOfWeek: 'Terça-feira',
                course: 'NR12 - Máquinas',
                courseType: 'NR12',
                time: '19h-23h',
                location: 'Sala de treinamento',
                participants: [
                    { name: 'VINICIUS GRITER FRANCO', department: 'PINTURA' },
                    { name: 'ADRIEL WASHINGTON', department: 'LABORATORIO' },
                    { name: 'EVA SILVIA SZYMANSKI', department: 'BOBINAGEM' },
                    { name: 'DERIC CAMARGO DA SILVA', department: 'PINTURA' },
                ]
            },

            // NR 11 - Operador de Empilhadeira
            {
                id: '2025-07-09-nr11-emp-t1',
                date: '2025-07-09',
                dayOfWeek: 'Quarta-feira',
                course: 'NR11 - Operador de Empilhadeira',
                courseType: 'NR11',
                time: '08h-17h',
                location: 'Sala de treinamentos',
                participants: [
                    { name: 'EMERSON VAZ', department: 'LABORATORIO' },
                    { name: 'VINICIUS MOTTA DE OLIVEIRA', department: 'LABORATORIO' },
                    { name: 'LUIZ GUSTAVO DA SILVA', department: 'LABORATORIO' },
                    { name: 'RENAN DA SILVA TELES', department: 'MONTAGEM RT' },
                ]
            },
            {
                id: '2025-07-09-nr11-emp-t2',
                date: '2025-07-09',
                dayOfWeek: 'Quarta-feira',
                course: 'NR11 - Operador de Empilhadeira',
                courseType: 'NR11',
                time: '18h-03h',
                location: 'Sala de treinamentos',
                participants: [
                    { name: 'VINICIUS FELIPE DE FRANÇA CORREA', department: 'MANUTENCAO' },
                    { name: 'JEFERSON TIMOTIO DA SILVA', department: 'MONTAGEM RT' },
                    { name: 'ANDERSON LUIZ DE LIMA', department: 'AUTOCLAVE' },
                    { name: 'ADRIEL WASHINGTON', department: 'LABORATORIO' },
                ]
            },
            {
                id: '2025-07-10-nr11-emp-t3',
                date: '2025-07-10',
                dayOfWeek: 'Quinta-feira',
                course: 'NR11 - Operador de Empilhadeira',
                courseType: 'NR11',
                time: '08h-17h',
                location: 'Sala de treinamentos',
                participants: [
                    { name: 'FRANCINETE PEREIRA DE SOUSA', department: 'LABORATORIO' },
                    { name: 'GABRIEL MOCELIN REPINOSKI', department: 'MONTAGEM GENT/BT' },
                    { name: 'HENRIQUE GOMES DE LIMA', department: 'MONTAGEM RT' },
                    { name: 'TIAGO AMARAL DE AZEVEDO', department: 'AUTOCLAVE' },
                ]
            },

            // NR 11 – Operador de Talha
            {
                id: '2025-07-25-nr11-talha-t1',
                date: '2025-07-25',
                dayOfWeek: 'Sexta-feira', // Dia da semana para 25/06/2025
                course: 'NR11 - Operador de Talha',
                courseType: 'NR11',
                time: '08h-12h',
                location: 'Sala de treinamentos', // Assumi o local como sala de treinamentos, se for diferente me diga
                participants: [
                    { name: 'DERMIVAL GARBELINI', department: 'AUTOCLAVE' },
                    { name: 'RAFAEL HENRIQUE MARCIANO', department: 'MONTAGEM MT' },
                    { name: 'VALDECIR CHAGAS CARVALHO', department: 'PINTURA' },
                    { name: 'EMERSON LUIZ DA SILVA DE FREITAS', department: 'EXPEDICAO' },
                    { name: 'ANDRE ALVES TAVARES', department: 'PINTURA' },
                    { name: 'FRANCINETE PEREIRA DE SOUSA', department: 'LABORATORIO' },
                    { name: 'VINICIUS MOTTA DE OLIVEIRA', department: 'LABORATORIO' },
                    { name: 'RHAFAEL HENRIQUE DAVID', department: 'AUTOCLAVE' },
                    { name: 'LUIZ GUSTAVO DA SILVA', department: 'LABORATORIO' },
                ]
            },
            {
                id: '2025-07-25-nr11-talha-t2',
                date: '2025-07-25',
                dayOfWeek: 'Sexta-feira', // Dia da semana para 25/07/2025
                course: 'NR11 - Operador de Talha',
                courseType: 'NR11',
                time: '19h-23h',
                location: 'Sala de treinamentos', // Assumi o local
                participants: [
                    { name: 'VINICIUS GRITER FRANCO', department: 'PINTURA' },
                    { name: 'ANDERSON LUIZ DE LIMA', department: 'AUTOCLAVE' },
                    { name: 'ADRIEL WASHINGTON', department: 'LABORATORIO' },
                    { name: 'DERIC CAMARGO DA SILVA', department: 'PINTURA' },
                ]
            },

            // NR 11 - Operador de Ponte Rolante
            {
                id: '2025-07-14-nr11-ponte-t1',
                date: '2025-07-14',
                dayOfWeek: 'Segunda-feira', // Dia da semana para 14/07/2025
                course: 'NR11 - Operador de Ponte Rolante',
                courseType: 'NR11',
                time: '08h-17h',
                location: 'Sala de treinamentos', // Assumi o local
                participants: [
                    { name: 'JAIR JUSTINO DOS SANTOS', department: 'EXPEDICAO' },
                    { name: 'GABRIEL ROCHA', department: 'EXPEDICAO' },
                    { name: 'NELVIN JOSE BRICENO HERNANDEZ', department: 'MONTAGEM RT' },
                    { name: 'EVERSON MORAES PAULA', department: 'MONTAGEM RT' },
                    { name: 'JONATAN DA ROSA CARNEIRO', department: 'MONTAGEM RT' },
                    { name: 'LUIZ EDUARDO COSTA SILVA', department: 'MONTAGEM RT' },
                ]
            },
            {
                id: '2025-07-14-nr11-ponte-t2',
                date: '2025-07-14',
                dayOfWeek: 'Segunda-feira', // Dia da semana para 14/07/2025
                course: 'NR11 - Operador de Ponte Rolante',
                courseType: 'NR11',
                time: '17h-00h', // **ATENÇÃO: Hora final corrigida para '??h', por favor, ajuste**
                location: 'Sala de treinamentos', // Assumi o local
                participants: [
                    { name: 'VINICIUS FELIPE DE FRANÇA CORREA', department: 'MANUTENCAO' },
                    { name: 'JEFERSON TIMOTIO DA SILVA', department: 'MONTAGEM RT' },
                ]
            },

            // NR35 – Trabalho em Altura
            {
                id: '2025-07-04-nr35-t1',
                date: '2025-07-04',
                dayOfWeek: 'Sexta-feira',
                course: 'NR35 - Trabalho em Altura',
                courseType: 'NR35',
                time: '07h-16h',
                location: 'Sala de treinamento',
                participants: [
                    { name: 'EMERSON VAZ', department: 'LABORATORIO' },
                    { name: 'LUIZ EDUARDO COSTA SILVA', department: 'MONTAGEM RT' },
                    { name: 'JEFERSON TIMOTIO DA SILVA', department: 'MONTAGEM RT' },
                    { name: 'LUIZ GUSTAVO DA SILVA', department: 'LABORATORIO' },
                    { name: 'ANDERSON LUIZ DE LIMA', department: 'AUTOCLAVE' },
                ]
            },

            // NR 18 – PEMT
            {
                id: '2025-07-15-nr18-pemt-t1',
                date: '2025-07-15',
                dayOfWeek: 'Terça-feira', // Dia da semana para 15/07/2025
                course: 'NR18 - PEMT',
                courseType: 'NR18',
                time: '08h-17h',
                location: 'Sala de treinamento', // Assumi o local
                participants: [
                    { name: 'MATHEUS HENRIQUE RUSSI', department: 'MONTAGEM GENT/BT' },
                    { name: 'FRANCINETE PEREIRA DE SOUSA', department: 'LABORATORIO' },
                    { name: 'VINICIUS MOTTA DE OLIVEIRA', department: 'LABORATORIO' },
                ]
            },
            {
                id: '2025-07-15-nr18-pemt-t2',
                date: '2025-07-15',
                dayOfWeek: 'Terça-feira', // Dia da semana para 15/07/2025
                course: 'NR18 - PEMT',
                courseType: 'NR18',
                time: '17h-23h',
                location: 'Sala de treinamento', // Assumi o local
                participants: [
                    { name: 'JEFERSON TIMOTIO DA SILVA', department: 'MONTAGEM RT' },
                    { name: 'ADRIEL WASHINGTON', department: 'LABORATORIO' },
                ]
            },
            {
                id: '2025-07-16-nr18-pemt-t3',
                date: '2025-07-16',
                dayOfWeek: 'Quarta-feira', // Dia da semana para 16/07/2025
                course: 'NR18 - PEMT',
                courseType: 'NR18',
                time: '08h-17h',
                location: 'Sala de treinamento', // Assumi o local
                participants: [
                    { name: 'EMERSON VAZ', department: 'LABORATORIO' },
                    { name: 'LUIZ GUSTAVO DA SILVA', department: 'LABORATORIO' },
                    // Um participante vazio estava aqui no seu texto, removido para clareza.
                ]
            },

            // NR10 Básico (desdobrado por dia)
            {
                id: '2025-06-23-nr10-basico-d1',
                date: '2025-06-23',
                dayOfWeek: 'Segunda-feira', // Dia da semana para 23/06/2025
                course: 'NR10 - Básico',
                courseType: 'NR10',
                time: '08h-17h',
                location: 'ONLINE',
                participants: [
                    { name: 'EMERSON VAZ', department: 'LABORATORIO' },
                    { name: 'LUIZ GUSTAVO DA SILVA', department: 'LABORATORIO' },
                ]
            },

             // NR10 Básico (desdobrado por dia)
            {
                id: '2025-06-24-nr10-basico-d1',
                date: '2025-06-24',
                dayOfWeek: 'Segunda-feira', // Dia da semana para 24/06/2025
                course: 'NR10 - Básico',
                courseType: 'NR10',
                time: '08h-17h',
                location: 'ONLINE',
                participants: [
                    { name: 'EMERSON VAZ', department: 'LABORATORIO' },
                    { name: 'LUIZ GUSTAVO DA SILVA', department: 'LABORATORIO' },
                ]
            },
            {
                id: '2025-06-26-nr10-basico-d2',
                date: '2025-06-26',
                dayOfWeek: 'Quinta-feira', // Dia da semana para 26/06/2025
                course: 'NR10 - Básico',
                courseType: 'NR10',
                time: '08h-17h',
                location: 'Sala de treinamento',
                participants: [
                    { name: 'EMERSON VAZ', department: 'LABORATORIO' },
                    { name: 'LUIZ GUSTAVO DA SILVA', department: 'LABORATORIO' },
                ]
            },
            {
                id: '2025-06-27-nr10-basico-d3',
                date: '2025-06-27',
                dayOfWeek: 'Sexta-feira', // Dia da semana para 27/06/2025
                course: 'NR10 - Básico',
                courseType: 'NR10',
                time: '08h-17h',
                location: 'Sala de treinamento',
                participants: [
                    { name: 'EMERSON VAZ', department: 'LABORATORIO' },
                    { name: 'LUIZ GUSTAVO DA SILVA', department: 'LABORATORIO' },
                ]
            },

            // NR10 SEP (desdobrado por dia)
            {
                id: '2025-07-21-nr10-sep-d1',
                date: '2025-07-21',
                dayOfWeek: 'Segunda-feira', // Dia da semana para 21/07/2025
                course: 'NR10 SEP',
                courseType: 'NR10 SEP',
                time: '08h-17h',
                location: 'Sala de treinamento',
                participants: [
                    { name: 'LUIZ FERNANDO SOARES DE SOUZA', department: 'ENGENHARIA APLICACAO' },
                    { name: 'PATRICK ROBERTO DE ALMEIDA', department: 'ENGENHARIA APLICACAO' },
                    { name: 'EMERSON VAZ', department: 'LABORATORIO' },
                    { name: 'LUIZ GUSTAVO DA SILVA', department: 'LABORATORIO' },
                    { name: 'ADRIEL WASHINGTON', department: 'LABORATORIO' },
                ]
            },
            {
                id: '2025-07-22-nr10-sep-d2',
                date: '2025-07-22',
                dayOfWeek: 'Terça-feira', // Dia da semana para 22/07/2025
                course: 'NR10 SEP',
                courseType: 'NR10 SEP',
                time: '08h-17h',
                location: 'Sala de treinamento',
                participants: [
                    { name: 'LUIZ FERNANDO SOARES DE SOUZA', department: 'ENGENHARIA APLICACAO' },
                    { name: 'PATRICK ROBERTO DE ALMEIDA', department: 'ENGENHARIA APLICACAO' },
                    { name: 'EMERSON VAZ', department: 'LABORATORIO' },
                    { name: 'LUIZ GUSTAVO DA SILVA', department: 'LABORATORIO' },
                    { name: 'ADRIEL WASHINGTON', department: 'LABORATORIO' },
                ]
            },
            {
                id: '2025-07-23-nr10-sep-d3',
                date: '2025-07-23',
                dayOfWeek: 'Quarta-feira', // Dia da semana para 23/07/2025
                course: 'NR10 SEP',
                courseType: 'NR10 SEP',
                time: '08h-17h',
                location: 'Sala de treinamento',
                participants: [
                    { name: 'LUIZ FERNANDO SOARES DE SOUZA', department: 'ENGENHARIA APLICACAO' },
                    { name: 'PATRICK ROBERTO DE ALMEIDA', department: 'ENGENHARIA APLICACAO' },
                    { name: 'EMERSON VAZ', department: 'LABORATORIO' },
                    { name: 'LUIZ GUSTAVO DA SILVA', department: 'LABORATORIO' },
                    { name: 'ADRIEL WASHINGTON', department: 'LABORATORIO' },
                ]
            },

            // NR11 – Transpaleteira Elétrica
            {
                id: '2025-06-23-nr11-transp-t1',
                date: '2025-06-23',
                dayOfWeek: 'Segunda-feira', // Dia da semana para 23/06/2025
                course: 'NR11 - Transpaleteira Elétrica',
                courseType: 'NR11',
                time: '08h-12h',
                location: 'Sala de treinamento',
                participants: [
                    { name: 'EMERSON VAZ', department: 'LABORATORIO' },
                    { name: 'MAICON JOSE INOCENCIO', department: 'MONTAGEM MT' },
                    { name: 'GABRIEL MOCELIN REPINOSKI', department: 'MONTAGEM GENT/BT' },
                    { name: 'RHAFAEL HENRIQUE DAVID', department: 'AUTOCLAVE' },
                ]
            },
            {
                id: '2025-06-23-nr11-transp-t2',
                date: '2025-06-23',
                dayOfWeek: 'Quinta-feira', // Dia da semana para 23/06/2025
                course: 'NR11 - Transpaleteira Elétrica',
                courseType: 'NR11',
                time: '20h-00h',
                location: 'Sala de treinamento',
                participants: [
                    { name: 'EDIMILSON EGIDIO BARBOSA', department: 'AUTOCLAVE' },
                    { name: 'ADRIEL WASHINGTON', department: 'LABORATORIO' },
                ]
            },
            {
                id: '2025-06-24-nr11-transp-t3',
                date: '2025-06-24',
                dayOfWeek: 'Terça-feira', // Dia da semana para 24/06/2025
                course: 'NR11 - Transpaleteira Elétrica',
                courseType: 'NR11',
                time: '08h-12h',
                location: 'Sala de treinamento',
                participants: [
                    { name: 'JEFERSON SOUZA DIAS', department: 'AUTOCLAVE' },
                    { name: 'FRANCINETE PEREIRA DE SOUSA', department: 'LABORATORIO' },
                    { name: 'VINICIUS MOTTA DE OLIVEIRA', department: 'LABORATORIO' },
                    { name: 'LUIZ GUSTAVO DA SILVA', department: 'LABORATORIO' },
                    { name: 'TIAGO AMARAL DE AZEVEDO', department: 'AUTOCLAVE' },
                ]
            },
            {
                id: '2025-06-24-nr11-transp-t4',
                date: '2025-06-24',
                dayOfWeek: 'Terça-feira', // Dia da semana para 24/06/2025
                course: 'NR11 - Transpaleteira Elétrica',
                courseType: 'NR11',
                time: '20h-00h',
                location: 'Sala de treinamento',
                participants: [
                    { name: 'ADILSON CORDEIRO DOS SANTOS', department: 'AUTOCLAVE' },
                    { name: 'JEAN CARLOS RIBEIRO DE BARROS', department: 'LABORATORIO' },
                    { name: 'ANDERSON LUIZ DE LIMA', department: 'AUTOCLAVE' },
                ]
            },
        ];

        // Mapeamento de cores para os tipos de curso
        const courseColors = {
            'NR10': { bg: 'bg-blue-100', text: 'text-blue-800', border: 'border-blue-600', mainBg: 'bg-blue-100', mainColor: 'bg-blue-500' },
            'NR10 SEP': { bg: 'bg-indigo-100', text: 'text-indigo-800', border: 'border-indigo-600', mainBg: 'bg-indigo-100', mainColor: 'bg-indigo-500' },
            'NR11': { bg: 'bg-green-100', text: 'text-green-800', border: 'border-green-600', mainBg: 'bg-green-100', mainColor: 'bg-green-500' },
            'NR12': { bg: 'bg-teal-100', text: 'text-teal-800', border: 'border-teal-600', mainBg: 'bg-teal-100', mainColor: 'bg-teal-500' },
            'NR18': { bg: 'bg-red-100', text: 'text-red-800', border: 'border-red-600', mainBg: 'bg-red-100', mainColor: 'bg-red-500' },
            'NR35': { bg: 'bg-cyan-100', text: 'text-cyan-800', border: 'border-cyan-600', mainBg: 'bg-cyan-100', mainColor: 'bg-cyan-500' },
            'OUTROS': { bg: 'bg-purple-100', text: 'text-purple-800', border: 'border-purple-600', mainBg: 'bg-purple-100', mainColor: 'bg-purple-500' },
        };

        // Mapeamento de cores para os departamentos (todas as chaves em MAIÚSCULAS)
        const departmentColors = {
            'LABORATÓRIO': { bg: 'bg-blue-100', text: 'text-blue-800' },
            'MONTAGEM RT': { bg: 'bg-indigo-100', text: 'text-indigo-800' },
            'AUTOCLAVE': { bg: 'bg-green-100', text: 'text-green-800' },
            'MONTAGEM MT': { bg: 'bg-teal-100', text: 'text-teal-800' },
            'BOBINAGEM': { bg: 'bg-purple-100', text: 'text-purple-800' },
            'PINTURA': { bg: 'bg-pink-100', text: 'text-pink-800' },
            'MANUTENÇÃO': { bg: 'bg-orange-100', text: 'text-orange-800' },
            'MONTAGEM GENT/BT': { bg: 'bg-yellow-100', text: 'text-yellow-800' },
            'EXPEDIÇÃO': { bg: 'bg-lime-100', text: 'text-lime-800' },
            'ENGENHARIA APLICAÇÃO': { bg: 'bg-fuchsia-100', text: 'text-fuchsia-800' },
            // Certifique-se de que cada departamento usado em `allTrainings` tenha uma entrada aqui
        };

        let currentMonth = '';
        let activeCourseFilter = 'all';
        let activeDepartmentFilter = 'all';
        let searchTerm = '';

        const monthTabsContainer = document.getElementById('month-tabs-container');
        const currentMonthDisplay = document.getElementById('current-month-display');
        const courseFiltersContainer = document.getElementById('course-filters-container');
        const departmentFiltersContainer = document.getElementById('department-filters-container');
        const searchInput = document.getElementById('search');
        const calendarGrid = document.getElementById('calendar-grid');

        function formatDisplayDate(dateString) {
            const date = new Date(dateString + 'T00:00:00');
            const options = { day: '2-digit', month: 'long', year: 'numeric' };
            const formattedDate = date.toLocaleDateString('pt-BR', options);
            return `${date.toLocaleDateString('pt-BR', { weekday: 'long' })}, ${formattedDate.replace('.', '')}`;
        }

        function getMonthYearString(dateString) {
            const date = new Date(dateString + 'T00:00:00');
            return date.toLocaleString('pt-BR', { month: 'long', year: 'numeric' });
        }

        function getDayBorderColor(trainings) {
            if (trainings.length > 0) {
                const firstCourseType = trainings[0].courseType;
                return courseColors[firstCourseType]?.border || 'border-gray-300';
            }
            return 'border-gray-300';
        }

        function getDayMainBgColor(trainings) {
            if (trainings.length > 0) {
                const firstCourseType = trainings[0].courseType;
                return courseColors[firstCourseType]?.mainBg || 'bg-gray-100';
            }
            return 'bg-gray-100';
        }

        function getDayIconColor(trainings) {
            if (trainings.length > 0) {
                const firstCourseType = trainings[0].courseType;
                return courseColors[firstCourseType]?.mainColor || 'bg-gray-500';
            }
            return 'bg-gray-500';
        }

        function renderCalendar() {
            calendarGrid.innerHTML = '';
            const filteredTrainings = filterTrainings();

            const trainingsByDate = {};
            filteredTrainings.forEach(training => {
                const dateKey = training.date;
                if (!trainingsByDate[dateKey]) {
                    trainingsByDate[dateKey] = [];
                }
                trainingsByDate[dateKey].push(training);
            });

            const sortedDates = Object.keys(trainingsByDate).sort((a, b) => new Date(a) - new Date(b));

            if (sortedDates.length === 0) {
                calendarGrid.innerHTML = '<p class="col-span-full text-center text-gray-600 text-lg mt-8">Nenhum treinamento encontrado para os filtros selecionados.</p>';
                return;
            }

            sortedDates.forEach(dateKey => {
                const trainingsOnDay = trainingsByDate[dateKey];
                const displayDate = formatDisplayDate(dateKey);
                const [dayOfWeek, dateParts] = displayDate.split(', ');
                const [dayOfMonth, monthAndYear] = dateParts.split(' de ');

                const borderColor = getDayBorderColor(trainingsOnDay);
                const mainBgColor = getDayMainBgColor(trainingsOnDay);
                const iconColor = getDayIconColor(trainingsOnDay);


                let dayHtml = `
                    <div class="calendar-day rounded-xl overflow-hidden shadow-lg border-t-4 ${borderColor}">
                        <div class="p-4 ${mainBgColor}">
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="text-sm text-gray-600">${dayOfWeek}</span>
                                    <h3 class="text-xl font-bold text-gray-800">${dayOfMonth} de ${monthAndYear.split(' ')[0]}</h3>
                                </div>
                                <div class="w-12 h-12 ${iconColor} rounded-full flex items-center justify-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="p-4">
                `;

                trainingsOnDay.forEach(training => {
                    const courseColor = courseColors[training.courseType] || { bg: 'bg-gray-100', text: 'text-gray-800' };
                    let participantsHtml = training.participants.map(p => {
                        const deptKey = p.department.toUpperCase();
                        const deptColor = departmentColors[deptKey] || { bg: 'bg-gray-100', text: 'text-gray-800' };
                        return `<li class="participant" data-department="${deptKey}">${p.name} <span class="department-badge ${deptColor.bg} ${deptColor.text} px-1 rounded">${p.department.toUpperCase()}</span></li>`;
                    }).join('');

                    dayHtml += `
                        <div class="training-card mb-4 rounded-lg p-3 cursor-pointer" onclick="toggleParticipants(this)">
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="${courseColor.bg} ${courseColor.text} text-xs font-medium px-2 py-1 rounded">${training.course}</span>
                                    <h4 class="font-semibold mt-1 text-gray-800">Turma (${training.time})</h4>
                                    <p class="text-sm text-gray-600">${training.location}</p>
                                </div>
                                <svg xmlns="http://www.w3.org/2000/svg" class="toggle-icon h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                </svg>
                            </div>
                            <div class="participant-list mt-3 pt-3 border-t border-gray-200">
                                <p class="text-sm font-medium text-gray-700 mb-2">Participantes (${training.participants.length}):</p>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    ${participantsHtml}
                                </ul>
                            </div>
                        </div>
                    `;
                });

                dayHtml += `</div></div>`;
                calendarGrid.insertAdjacentHTML('beforeend', dayHtml);
            });
        }

        function filterTrainings() {
            return allTrainings.filter(training => {
                const trainingMonthYear = getMonthYearString(training.date);
                const matchesMonth = (currentMonth === 'all' || trainingMonthYear === currentMonth);
                const matchesCourse = (activeCourseFilter === 'all' || training.courseType === activeCourseFilter);

                let matchesDepartment = false;
                if (activeDepartmentFilter === 'all') {
                    matchesDepartment = true;
                } else {
                    matchesDepartment = training.participants.some(p =>
                        p.department.toUpperCase() === activeDepartmentFilter.toUpperCase()
                    );
                }

                let matchesSearch = false;
                if (searchTerm === '') {
                    matchesSearch = true;
                } else {
                    const lowerSearchTerm = searchTerm.toLowerCase();
                    if (training.course.toLowerCase().includes(lowerSearchTerm) ||
                        training.location.toLowerCase().includes(lowerSearchTerm) ||
                        training.participants.some(p =>
                            p.name.toLowerCase().includes(lowerSearchTerm) ||
                            p.department.toLowerCase().includes(lowerSearchTerm)
                        )
                    ) {
                        matchesSearch = true;
                    }
                }

                return matchesMonth && matchesCourse && matchesDepartment && matchesSearch;
            });
        }

        window.toggleParticipants = function(element) {
            element.classList.toggle('expanded');
        };

        document.addEventListener('DOMContentLoaded', () => {
            const uniqueMonths = [...new Set(allTrainings.map(t => getMonthYearString(t.date)))].sort((a, b) => {
                const monthOrder = {
                    'janeiro': 0, 'fevereiro': 1, 'março': 2, 'abril': 3, 'maio': 4, 'junho': 5,
                    'julho': 6, 'agosto': 7, 'setembro': 8, 'outubro': 9, 'novembro': 10, 'dezembro': 11
                };
                const [monthAStr, , yearAStr] = a.split(' ');
                const [monthBStr, , yearBStr] = b.split(' ');
                const dateA = new Date(yearAStr, monthOrder[monthAStr]);
                const dateB = new Date(yearBStr, monthOrder[monthBStr]);
                return dateA - dateB;
            });

            if (uniqueMonths.length > 1) {
                const allMonthsTab = document.createElement('div');
                allMonthsTab.classList.add('month-tab', 'px-4', 'py-2', 'rounded-md', 'text-sm', 'font-medium');
                allMonthsTab.dataset.month = 'all';
                allMonthsTab.textContent = 'Todos os Meses';
                monthTabsContainer.appendChild(allMonthsTab);
            }

            uniqueMonths.forEach(month => {
                const tab = document.createElement('div');
                tab.classList.add('month-tab', 'px-4', 'py-2', 'rounded-md', 'text-sm', 'font-medium');
                tab.dataset.month = month;
                tab.textContent = month.charAt(0).toUpperCase() + month.slice(1);
                monthTabsContainer.appendChild(tab);
            });

            const today = new Date();
            const currentMonthNameFormatted = today.toLocaleString('pt-BR', { month: 'long', year: 'numeric' });
            let defaultMonthToActivate = 'all';

            if (uniqueMonths.includes(currentMonthNameFormatted)) {
                defaultMonthToActivate = currentMonthNameFormatted;
            } else if (uniqueMonths.length > 0) {
                const futureMonths = uniqueMonths.filter(monthYear => {
                    const [monthStr, , yearStr] = monthYear.split(' ');
                    const monthIndex = { 'janeiro': 0, 'fevereiro': 1, 'março': 2, 'abril': 3, 'maio': 4, 'junho': 5, 'julho': 6, 'agosto': 7, 'setembro': 8, 'outubro': 9, 'novembro': 10, 'dezembro': 11 }[monthStr];
                    const monthDate = new Date(yearStr, monthIndex);
                    return monthDate >= new Date(today.getFullYear(), today.getMonth(), 1);
                }).sort((a,b) => {
                    const monthOrder = {
                        'janeiro': 0, 'fevereiro': 1, 'março': 2, 'abril': 3, 'maio': 4, 'junho': 5,
                        'julho': 6, 'agosto': 7, 'setembro': 8, 'outubro': 9, 'novembro': 10, 'dezembro': 11
                    };
                    const [monthAStr, , yearAStr] = a.split(' ');
                    const [monthBStr, , yearBStr] = b.split(' ');
                    const dateA = new Date(yearAStr, monthOrder[monthAStr]);
                    const dateB = new Date(yearBStr, monthOrder[monthBStr]);
                    return dateA - dateB;
                });

                if (futureMonths.length > 0) {
                    defaultMonthToActivate = futureMonths[0];
                } else {
                    defaultMonthToActivate = uniqueMonths[0];
                }
            }


            currentMonth = defaultMonthToActivate;

            const initialActiveMonthTab = document.querySelector(`[data-month="${currentMonth}"]`);
            if (initialActiveMonthTab) {
                initialActiveMonthTab.classList.add('active');
            } else if (document.querySelector('[data-month="all"]')) {
                 document.querySelector('[data-month="all"]').classList.add('active');
                 currentMonth = 'all';
            }
            currentMonthDisplay.textContent = currentMonth === 'all' ? 'Todos os Meses' : currentMonth.charAt(0).toUpperCase() + currentMonth.slice(1);


            monthTabsContainer.addEventListener('click', (event) => {
                if (event.target.classList.contains('month-tab')) {
                    monthTabsContainer.querySelectorAll('.month-tab').forEach(tab => tab.classList.remove('active'));
                    event.target.classList.add('active');
                    currentMonth = event.target.dataset.month;
                    currentMonthDisplay.textContent = event.target.textContent;
                    renderCalendar();
                }
            });

            const uniqueCourseTypes = [...new Set(allTrainings.map(t => t.courseType))]
                .sort((a, b) => {
                    const isNRa = a.startsWith('NR');
                    const isNRb = b.startsWith('NR');

                    if (isNRa && !isNRb) return -1;
                    if (!isNRa && isNRb) return 1;
                    return a.localeCompare(b);
                });

            courseFiltersContainer.innerHTML = `<span class="course-filter-tag px-3 py-1 bg-gray-200 text-gray-800 rounded-full text-sm font-medium active" data-filter="all">Todos</span>`;
            uniqueCourseTypes.forEach(type => {
                const colors = courseColors[type] || { bg: 'bg-gray-100', text: 'text-gray-800' };
                const tag = document.createElement('span');
                tag.classList.add('course-filter-tag', 'px-3', 'py-1', colors.bg, colors.text, 'rounded-full', 'text-sm', 'font-medium');
                tag.dataset.filter = type;
                tag.textContent = type;
                courseFiltersContainer.appendChild(tag);
            });

            courseFiltersContainer.addEventListener('click', (event) => {
                if (event.target.classList.contains('course-filter-tag')) {
                    courseFiltersContainer.querySelectorAll('.course-filter-tag').forEach(tag => tag.classList.remove('active'));
                    event.target.classList.add('active');
                    activeCourseFilter = event.target.dataset.filter;
                    renderCalendar();
                }
            });

            const uniqueDepartments = [...new Set(allTrainings.flatMap(t => t.participants.map(p => p.department.toUpperCase())))].sort((a,b) => a.localeCompare(b));
            
            departmentFiltersContainer.innerHTML = `<button class="department-filter-btn px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded-md text-sm font-medium transition-colors active" data-filter="all">Todos</button>`;
            
            uniqueDepartments.forEach(dept => {
                const btn = document.createElement('button');
                btn.classList.add('department-filter-btn', 'px-3', 'py-1', 'bg-gray-200', 'hover:bg-gray-300', 'rounded-md', 'text-sm', 'font-medium', 'transition-colors');
                btn.dataset.filter = dept;
                btn.textContent = dept;
                departmentFiltersContainer.appendChild(btn);
            });

            departmentFiltersContainer.addEventListener('click', (event) => {
                if (event.target.classList.contains('department-filter-btn')) {
                    departmentFiltersContainer.querySelectorAll('.department-filter-btn').forEach(btn => btn.classList.remove('active'));
                    event.target.classList.add('active');
                    activeDepartmentFilter = event.target.dataset.filter;
                    renderCalendar();
                }
            });

            searchInput.addEventListener('keyup', () => {
                searchTerm = searchInput.value;
                renderCalendar();
            });

            renderCalendar();
        });
    </script>
</body>
<footer class="mt-12 py-6 bg-gray-100 text-center text-gray-600 border-t border-gray-200">
        <div class="container mx-auto">
            <p>© 2025 BREE Energy - Departamento de Segurança do Trabalho</p>
            
        </div>
    </footer>

</html>
